<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard</title>
    <link
      href="https://fonts.googleapis.com/css?family=Cookie"
      rel="stylesheet"
      type="text/css"
    />
    <link rel="stylesheet" href="../static/header/header.css" />
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
    />

    <link
      rel="stylesheet"
      type="text/css"
      href="{{ url_for('static', filename='login/pat_dash.css') }}"
    />
    <link rel="stylesheet" href="../static/styles.css" />
    <script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.12"></script>
  </head>
  <body>
    <header class="header-fixed">
      <div class="header-limiter">
        <img
          class="logo"
          id="changingImage"
          src="../static/images/HealthAI-e.gif"
          alt="Default Image"
        />
        <nav>
          <a href="{{url_for('home')}}">Home</a>

          <a href="{{ url_for('login') }}">Log Out</a>
        </nav>
      </div>
    </header>
    <div class="header-fixed-placeholder"></div>
    <br />
    <div class="nutri">
      <h1
        class="fadeIn"
        style="margin: 15px 0px 15px 20px; text-transform: capitalize"
      >
        Welcome, {{ username }}!
      </h1>
      <div class="Nutri_contain">
        <a href="{{ url_for('nutri') }}" alt="NutriVision">
          <img
            src="../static/images/nutition.jpg"
            alt="Nutrition"
            class="Nutri_img" />
          <p>
            Unlock the Secrets of Your Food: Picture This - Healthier You!<br /></p
        ></a>
      </div>
    </div>
    <br />
    <br />
    <div class="main">
      <div class="features">
        <a href="{{ url_for('symptompredict') }}" class="animatedLink">
          <div class="feature">
            <img src="../static/images/admin_dash_back.jpg" alt="Doctor" />
            <div class="description">
              <p>
                Try our <b>Symptom based disease predictor </b> predictive
                health at your fingertips: Know, Prepare, Prevail!
              </p>
            </div>
          </div>
        </a>
        <a href="{{ url_for('reviewpredict') }}" class="animatedLink">
          <div class="feature">
            <img src="../static/images/admin_dash_back.jpg" alt="Chat" />
            <div class="description">
              <p>
                Health in focus: Our <b>Descriptive Predictor </b> simplifies
                wellness planning. Know, Prepare, Prevail!
              </p>
            </div>
          </div>
        </a>
        <a href="{{ url_for('healthimaging_patient') }}" class="animatedLink">
          <div class="feature">
            <img
              src="../static/images/admin_dash_back.jpg"
              alt="Medical History"
            />
            <div class="description">
              <p>
                <b>HealthCare Imaging </b>-Spot brain tumors early or detect
                pneumonia swiftly : Explore symptoms, causes, and treatments
                with ease.
              </p>
            </div>
          </div>
        </a>
      </div>
    </div>
    <br />
    <br />
    <div class="container">
      <!-- Table for booked appointments -->
      <div class="col-md-6 booked">
        <div class="padding animate__animated animate__fadeInBottomLeft">
          <table class="custom-table" border="1">
            <h2>
              <span>Booked</span>
              <span>Appointments</span>
            </h2>
            <thead>
              <tr style="background: transparent">
                <th>Doctor</th>
                <th>Chat</th>
                <th>Date</th>
                <th>Time</th>
              </tr>
            </thead>
            <tbody>
              {% if appointments %} {% for appointment in appointments %}
              <tr>
                <td>&nbsp;&nbsp;{{ appointment.doctor }}</td>
                <td>
                  <a href="{{ url_for('chat' , username=username) }}"
                    ><button id="openChatBtn">Open Chat</button></a
                  >
                </td>
                <td>{{ appointment.date }}</td>
                <td>{{ appointment.time }}</td>
              </tr>
              <tr class="spacer">
                <td colspan="100" style="background: transparent"></td>
              </tr>
              {% endfor %} {% else %}
              <tr>
                <td colspan="4" style="text-align: center">
                  No booked appointments..
                </td>
              </tr>
              {% endif %}
            </tbody>
          </table>
        </div>
      </div>
      <!-- Middle gap -->
      <div class="col-sm-1"></div>
      <!-- Form to book a new appointment -->
      <div class="col-md-6 booking">
        <div class="book_table animate__animated animate__fadeInTopRight">
          <h2>
            <span>Book</span>
            <span>an</span>
            <span>Appointment</span>
          </h2>
          <form action="{{ url_for('book_appointment') }}" method="post">
            <h2></h2>
            <div class="details">
              <div class="animation form-group">
                <label for="doctor">Select Doctor:</label>
                <select class="form-control" id="doctor" name="doctor" required>
                  {% for doctor in doctors %}
                  <option>{{ doctor }}</option>
                  {% endfor %}
                </select>
              </div>
              <div class="animation form-group">
                <label for="date">Select Date:</label>
                <input
                  type="date"
                  class="form-control"
                  id="date"
                  name="date"
                  required
                />
              </div>
              <div class="animation form-group">
                <label for="time">Select Time:</label>
                <input
                  type="time"
                  class="form-control"
                  id="time"
                  name="time"
                  required
                />
              </div>
            </div>
            <div class="boo-but">
              <div class="sub-but">
                <button
                  type="submit"
                  class="button-51"
                  role="button"
                  id="bookAppointmentBtn"
                >
                  <span class="button-51__Content">
                    <span class="button-51__Text text">B</span>
                    <span class="button-51__Text text">O</span>
                    <span class="button-51__Text text">O</span>
                    <span class="button-51__Text text">K</span>
                  </span>
                </button>
              </div>
            </div>
          </form>
          <p class="fadeIn" id="confirmation-message"></p>
        </div>
      </div>
    </div>
    <br />
    <br />
    <br />
    <div>
      <div class="chatButton" id="chatButton">
        <div class="backgroundAnimation">
          <div class="lines"></div>
        </div>
        <img src="../static/images/chat-icon.gif" />
      </div>

      <div class="chatBox" id="chatBox">
        <div class="chatheader">
          <h3 class="bot-name">
            <img
              class="chat-icon"
              src="../static/images/chat-icon.gif"
              alt="Chat Icon"
            />Medibot
          </h3>

          <button id="closeChat">&times;</button>
        </div>

        <div class="chatwallpaper">
          <div id="waveContainer">
            <div class="wave-01"></div>
            <div class="wave-02"></div>
            <div class="wave-03"></div>
          </div>
          <div class="chatLog" id="chatLog"></div>
          <div class="inputt">
            <input type="text" id="userInput" placeholder="Type a message..." />
            <button id="sendMessage" aria-label="Send message">
              <svg
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10Zm-14.707-.707 4-4a1 1 0 0 1 1.414 0l4 4a1 1 0 0 1-1.414 1.414L13 10.414V16a1 1 0 1 1-2 0v-5.586l-2.293 2.293a1 1 0 0 1-1.414-1.414Z"
                  fill="#000000"
                />
              </svg>
            </button>
          </div>
        </div>
      </div>
    </div>
    <br /><br /><br />
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Get the button and message elements
        var bookAppointmentBtn = document.getElementById("bookAppointmentBtn");
        var confirmationMessage = document.getElementById(
          "confirmation-message"
        );

        // Check if there's a confirmation message in session storage
        var storedConfirmationMessage = sessionStorage.getItem(
          "confirmationMessage"
        );
        if (storedConfirmationMessage) {
          confirmationMessage.textContent = storedConfirmationMessage;
          confirmationMessage.style.display = "block";
          // Clear the stored message after displaying it
          sessionStorage.removeItem("confirmationMessage");
          // Set a timeout to hide the message after 10 seconds
          setTimeout(function () {
            confirmationMessage.style.display = "none";
          }, 7000); // Increase the timeout to 10 seconds
        }

        // Add click event listener to the button
        bookAppointmentBtn.addEventListener("click", function () {
          // Display the confirmation message
          confirmationMessage.textContent =
            "Your appointment request has been sent!  please wait for the doctor to confirm your appointment.";
          confirmationMessage.style.display = "block";
          // Store the message in session storage
          sessionStorage.setItem(
            "confirmationMessage",
            "Your appointment request has been sent!  please wait for the doctor to confirm your appointment."
          );
          // Set a timeout to hide the message after 10 seconds
          setTimeout(function () {
            confirmationMessage.style.display = "none";
          }, 7000); // Increase the timeout to 10 seconds
        });
      });
    </script>
    <script>
      const columns = Array.from(document.getElementsByClassName("animation"));

      function slideOut(column) {
        column.classList.add("slide-out");
      }

      function slideIn(column, index) {
        setTimeout(function () {
          column.classList.remove("slide-out");
        }, (index + 1) * 200);
      }

      columns.forEach(slideOut);
      columns.forEach(slideIn);
    </script>
    <script>
      const boobut = Array.from(document.getElementsByClassName("boo-but"));
      function slideO(row) {
        row.classList.add("slide-out");
      }
      function slideI(row, index) {
        setTimeout(function () {
          row.classList.remove("slide-out");
        }, (index + 5) * 200);
      }
      boobut.forEach(slideO);

      boobut.forEach(slideI);
    </script>
    <script src="../static/login/animation.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="../static/header.js"></script>
    <script src="../static/script.js"></script>
  </body>
</html>
