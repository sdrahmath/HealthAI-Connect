<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="stylesheet" type="text/css" href="../static/login/chats.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
    />
    <link rel="stylesheet" href="../static/chatbot.css" />
  </head>
  <body>
    <div class="container">
      <div class="chat-container">
        <div class="chat-header">
          <button id="goBackBtn" onclick="goBack()">&#10006;</button>
          <h3>HealthAI Consultancy +</h3>
          <div class="dot-menu">
            <input id="dot-menu" type="checkbox" class="dot-menu__checkbox" />
            <label for="dot-menu" class="dot-menu__label">
              <span>&#9776;</span>
              <div class="dropdown">
                <form
                  id="clearChatsForm"
                  action="{{ url_for('clear_chats', username=username) }}"
                  method="post"
                >
                  <button id="clearChatsBtn" type="submit">Clear Chats</button>
                </form>
              </div>
            </label>
          </div>
        </div>
        <div class="chat-log">
          <div
            id="defaultPage"
            style="display: {% if messages %}none{% else %}block{% endif %}"
          >
            <div class="defaultMsg">
              <h3>Hey there! {{username}}!</h3>
              <img src="../static/images/patient-doctor-removebg.png" />
            </div>
          </div>
          <ul id="messages">
            {% for message in messages %}
            <li class="{% if message.username == username %}right{% endif %}">
              <div class="message-content">
                <strong>{{ message.username }}</strong>
                <p class="content">{{ message.content }}</p>
              </div>
            </li>
            {% endfor %}
          </ul>
        </div>
        <form id="form" action="">
          <div class="Inputt">
            <!-- Use the passed username as a hidden field -->
            <input type="hidden" id="username" value="{{ username }}" />
            <input
              class="userInput"
              id="input"
              placeholder="Type your message here..."
              autocomplete="off"
            />
            <button class="sendButton" id="button">
              <svg
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10Zm-14.707-.707 4-4a1 1 0 0 1 1.414 0l4 4a1 1 0 0 1-1.414 1.414L13 10.414V16a1 1 0 1 1-2 0v-5.586l-2.293 2.293a1 1 0 0 1-1.414-1.414Z"
                  fill="#0e1111"
                ></path>
              </svg>
            </button>
          </div>
        </form>
      </div>
    </div>
    <div>
      {% if username in doctors %}
      <h1 style="margin-top:700%;">Doctor<h1>
      {%elif username in patients%}
      <h1 style="margin-top:700%;">Patient<h1>
      {%endif%}
    </div>

    <div class="boxes first">
      <div class="box">
        <div></div>
        <div></div>
        <div></div>
        <div></div>
      </div>
      <div class="box">
        <div></div>
        <div></div>
        <div></div>
        <div></div>
      </div>
      <div class="box">
        <div></div>
        <div></div>
        <div></div>
        <div></div>
      </div>
      <div class="box">
        <div></div>
        <div></div>
        <div></div>
        <div></div>
      </div>
    </div>
    <div class="boxes second">
      <div class="box">
        <div></div>
        <div></div>
        <div></div>
        <div></div>
      </div>
      <div class="box">
        <div></div>
        <div></div>
        <div></div>
        <div></div>
      </div>
      <div class="box">
        <div></div>
        <div></div>
        <div></div>
        <div></div>
      </div>
      <div class="box">
        <div></div>
        <div></div>
        <div></div>
        <div></div>
      </div>
    </div>
    <div class="boxes third">
      <div class="box">
        <div></div>
        <div></div>
        <div></div>
        <div></div>
      </div>
      <div class="box">
        <div></div>
        <div></div>
        <div></div>
        <div></div>
      </div>
      <div class="box">
        <div></div>
        <div></div>
        <div></div>
        <div></div>
      </div>
      <div class="box">
        <div></div>
        <div></div>
        <div></div>
        <div></div>
      </div>
    </div>
    <div class="boxes fourth">
      <div class="box">
        <div></div>
        <div></div>
        <div></div>
        <div></div>
      </div>
      <div class="box">
        <div></div>
        <div></div>
        <div></div>
        <div></div>
      </div>
      <div class="box">
        <div></div>
        <div></div>
        <div></div>
        <div></div>
      </div>
      <div class="box">
        <div></div>
        <div></div>
        <div></div>
        <div></div>
      </div>
    </div>
    {% if username in doctors %}
    <div>
      <div class="chatButton" id="chatButton">
        <div class="backgroundAnimation">
          <div class="lines"></div>
        </div>
        <img src="../static/images/chat-icon.gif" />
      </div>

      <div class="chatBox" id="chatBox">
        <div class="chatheader">
          <h3 class="bot-name">
            <img
              class="chat-icon"
              src="../static/images/chat-icon.gif"
              alt="Chat Icon"
            />Medibot
          </h3>

          <button id="closeChat">&times;</button>
        </div>

        <div class="chatwallpaper">
          <div id="waveContainer">
            <div class="wave-01"></div>
            <div class="wave-02"></div>
            <div class="wave-03"></div>
          </div>
          <div class="chatLog" id="chatLog"></div>
          <div class="inputt">
            <input type="text" id="userInput" placeholder="Type a message..." />
            <button id="sendMessage" aria-label="Send message">
              <svg
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10Zm-14.707-.707 4-4a1 1 0 0 1 1.414 0l4 4a1 1 0 0 1-1.414 1.414L13 10.414V16a1 1 0 1 1-2 0v-5.586l-2.293 2.293a1 1 0 0 1-1.414-1.414Z"
                  fill="#000000"
                />
              </svg>
            </button>
          </div>
        </div>
      </div>
    </div> 
    {%endif%}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
    <script src="../static/login/chat.js"></script>
    
    <script src="../static/chatbot.js"></script>
  </body>
</html>
